<div class="row">
	<div class="col-md-6">
		<h3>Les fichiers associes a la techno</h3>
			<blockquote>
				<p ng-repeat="template_entry in templateEntries" >
					<button ng-click="delete_template(template_entry.namespace, template_entry.name)" class="btn btn-link btn-red" ng-mouseenter="hover = true" ng-mouseleave="hover = false"><span class="glyphicon glyphicon-remove"  ></span></button>
					<a href="" ng-click="edit_template(template_entry.namespace, template_entry.name)">{{template_entry.name}}</a>
					<small>{{template_entry.location}}/{{template_entry.filename}}</small>
				</p>
			</blockquote>
		<button ng-click="add_template(namespace)" class="btn">Ajouter un template</button>
	</div>

	<div class="col-md-6">
		<h3>Les properties associees a la techno  <button ng-click="refresh_properties()" class="btn">Rafraichir</button></h3>
		<h2 ng-show="propertiesModel.key_value_properties.length > 0">Champs simples :</h2>
		<dl class="dl-horizontal text-overflow" style="margin-bottom:0" ng-repeat="keyValueProperty in propertiesModel.key_value_properties | orderBy:'name' track by $index">
			<dt>{{ keyValueProperty.name }}</dt>
			<dd><small>{{ keyValueProperty.comment }}</small></dd>
		</dl>
		<h2 ng-show="propertiesModel.iterable_properties.length > 0">Champs iterables :</h2>
		<div ng-repeat="iterableProperty in propertiesModel.iterable_properties track by $index">
			{{ iterableProperty.name }}
			<ul>
				<li ng-repeat="field in iterableProperty.fields track by $index">
					{{ field.name }}  <small>{{ field.comment }}</small>
				</li>
			</ul>
		</div>
	</div>
</div>

<script type="text/ng-template" id="edit-template-modal.html">
	<div class="modal-header">
        <h3 class="modal-title">Ajout/Edition de template</h3>
    </div>
	<div class="modal-body">
        <form name="templateForm" role="form">
			<div class="form-group">
				<label for="templateName">Titre</label>
				<input type="text" class="form-control" required ng-trim="true" ng-model="template.name" id="templateName" placeholder="Donner un titre au template"/>
			</div>
			<div class="form-group">
				<label for="templateFilename">Nom du fichier final</label>
				<input type="text" class="form-control" required ng-trim="true" ng-model="template.filename" id="templateFilename" placeholder="Indiquer le nom qu'aura le fichier sur le serveur. On peut utiliser des proprietes dans ce champ"/>
			</div>
			<div class="form-group">
				<label for="templateLocation">Dossier de destination</label>
				<input type="text" class="form-control" required ng-trim="true" ng-model="template.location" id="templateLocation" placeholder="Indiquer le dossier dans lequel sera copie le fichier sur le serveur. On peut utiliser des proprietes dans ce champ"/>
			</div>
			<div class="form-group">
				<label for="templateContent">Contenu du fichier</label>
				<textarea id="templateContent" style="height: 400px; width: 100%" code-mirror code-mirror-model="template.template"></textarea>
			</div>	
		</form>
    </div>
    <div class="modal-footer">
		<button class="btn btn-primary"  ng-disabled="technoForm.$invalid" ng-click="save_template(template)">Sauver le template</button>
        <button class="btn btn-success" ng-disabled="technoForm.$invalid" ng-click="$close(template)">Sauver et Fermer</button>
		<button class="btn btn-warning" ng-click="$dismiss('cancel')">Annuler</button>
    </div>
</script>
