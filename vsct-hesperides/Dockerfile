ARG FROM_VERSION=latest
FROM hesperides/hesperides:$FROM_VERSION

COPY certificates/trustore /etc/ssl/certs/java/
# On compl√®te la CMD originale avec le trustore : https://github.com/voyages-sncf-technologies/hesperides/blob/develop/Dockerfile#L30
CMD /usr/local/bin/java $JAVA_OPTS \
     -XX:+ExitOnOutOfMemoryError -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/tmp/dumps -XX:-OmitStackTraceInFastThrow \
     -Xms2g -Xmx4g \
     -Djavax.net.ssl.trustStore=/etc/ssl/certs/java/trustore \
     -jar /hesperides.jar
