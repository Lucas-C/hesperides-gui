<h3>Diff entre <span class="diff-text-modifiable">{{application_name}} - {{platform_name}} {{properties_path}}</span>
    et <span class="diff-text-unmodifiable">{{compare_application}} -
    {{compare_platform}} {{compare_path}}</span></h3>

<div layout="row" layout-margin>
    <md-button class="md-raised md-primary" ng-click="apply_diff()">
        1/ Prévisualiser les changements <span class="diff-warning-text-button">ne sauvegarde pas</span>
    </md-button>
    <md-button class="md-raised md-primary"  ng-really-click="save_diff()" ng-really-message="Les modifications vont être appliquées sur {{application_name}} - {{platform_name}}. Continuer ?">
        2/ <span class="diff-warning-text-button">Sauvegarder</span> les changements (il faut avoir prévisualisé avant)
    </md-button>
</div>

<!-- Seulement à gauche -->
<div layout="column" class="bg-light">
    <div layout="row">
        <div flex="10">
            <md-button ng-click="toggle0 = !toggle0" class="md-fab md-mini" aria-label="Deplier/Plier le menu"
                       ng-disabled="(diff_containers | filter:{'status':0}).length < 1">
                <i class="fa"
                   ng-class="{'fa-eye': !toggle0, 'fa-eye-slash': toggle0}"></i>
            </md-button>
        </div>

        <div flex>
            <h3>Seulement sur <span class="diff-text-modifiable">{{application_name}} - {{platform_name}}</span>
                ({{(diff_containers | filter:{'status':0}).length}})</h3>
        </div>
    </div>
    <div layout="row" layout-wrap ng-show="toggle0">
        <div flex="20">
            <md-input-container class="md-block">
                <label>Filtrer les propriétés par clé</label>
                <input type="text"required ng-trim="true"
                       ng-model="propertiesKeyFilter0">
            </md-input-container>
        </div>
        <div flex="35" layout-align="end start" layout="row">
            <div>
            </div>
        </div>
        <div flex="5" layout="row" layout-align="center start">
            <div>

            </div>
        </div>
        <div flex="40">

        </div>
    </div>
    <md-divider ng-show="toggle0"></md-divider>
    <div layout="row" ng-show="toggle0" ng-repeat="diff_container in diff_containers0 = (diff_containers | filter:{'status':0, 'property_name': propertiesKeyFilter0} | orderBy:'property_name')">
        <div flex="20" layout-align="end start" layout="row">
            <div class="diff-property-name">{{diff_container.property_name}}</div>
        </div>
        <div flex="5">
        </div>
        <div flex="35" layout-align="start start" layout="row">
            <div class="diff-text-modifiable diff-value diff-line">
                {{diff_container.property_to_modify.value ? diff_container.property_to_modify.value : "Aucune valeur renseignée"}}
            </div>
        </div>
        <div flex="5" layout="row" layout-align="center start">
            <div>

            </div>
        </div>
        <div flex="35">
        </div>
    </div>
</div>

<!-- Identiques -->
<div layout="column" class="bg-light">
    <div layout="row">
        <div flex="10">
            <md-button ng-click="toggle1 = !toggle1" class="md-fab md-primary md-mini" aria-label="Deplier/Plier le menu"
                       ng-disabled="(diff_containers | filter:{'status':1}).length < 1">
                <i class="fa"
                   ng-class="{'fa-eye': !toggle1, 'fa-eye-slash': toggle1}"></i>
            </md-button>
        </div>

        <div flex>
            <h3>Identiques sur <span class="diff-text-modifiable">{{application_name}} - {{platform_name}}</span> et <span
                    class="diff-text-unmodifiable">{{compare_application}} -
                {{compare_platform}}</span>
                ({{(diff_containers | filter:{'status': 1}).length}})</h3>
        </div>
    </div>
    <div layout="row" layout-wrap ng-show="toggle1">
        <div flex="20">
            <md-switch class="md-primary" ng-model="show_only_modified" aria-label="Ne montrer que les valeurs venant d'être modifiées" class="md-block">
                Ne montrer que les valeurs <br/>venant d'être modifiées
            </md-switch>
        </div>
        <div flex="35" layout-align="end start" layout="row">
            <div class="diff-text-modifiable">{{application_name}} - {{platform_name}} (destination =&gt; modifiable)</div>
        </div>
        <div flex="5">

        </div>
        <div flex="40">
            <span class="diff-text-unmodifiable">{{compare_application}} - {{compare_platform}} (source =&gt; non modifiable)</span>
        </div>
    </div>
    <div layout="row" layout-wrap ng-show="toggle1">
        <div flex="20">
            <md-input-container class="md-block">
                <label>Filtrer les propriétés par clé</label>
                <input type="text"required ng-trim="true"
                       ng-model="propertiesKeyFilter1">
            </md-input-container>
        </div>
        <div flex="35" layout-align="end start" layout="row">
            <div>
                <span>Sélectionner les valeurs à reporter <span
                        class="fa fa-stop diff-text-unmodifiable"></span> =====&gt; <span
                        class="fa fa-stop diff-text-modifiable"></span></span>
            </div>
        </div>
        <div flex="5" layout="row" layout-align="center start">
            <div>
                <md-checkbox aria-label="Sélectionner toutes les valeurs" ng-model="toggle_diff"
                             ng-click="toggle_selected_to_containers_with_filter({'status':1, 'modified': true}, !toggle_ident, propertiesKeyFilter1)">
                </md-checkbox>
            </div>
        </div>
        <div flex="40">
            Tous
        </div>
    </div>
    <md-divider ng-show="toggle1"></md-divider>
    <div layout="row" ng-show="toggle1"
         ng-repeat="diff_container in diff_containers1 = (diff_containers | filter: show_only_modified ? {'status':1, 'modified': true, 'property_name': propertiesKeyFilter1} : {'status':1, 'property_name': propertiesKeyFilter1}  | orderBy:'property_name')">
        <div flex="20" layout-align="end start" layout="row">
            <div class="diff-property-name">{{diff_container.property_name}}</div>
        </div>
        <div flex="35" layout-align="end start" layout="row">
            <div class="diff-text-modifiable diff-value">
                {{diff_container.property_to_modify.value ? diff_container.property_to_modify.value : "Aucune valeur renseignée"}}
            </div>
        </div>
        <div flex="5" layout="row" layout-align="center start">
            <div>
                <warning-value property-to-modify="diff_container.property_to_modify" property-to-compare-to="diff_container.property_to_compare_to"></warning-value>
                <span class="fa fa-check" ng-hide="diff_container.modified"></span>
                <md-checkbox aria-label="Reporter la valeur" ng-model="diff_container.selected" class="diff"
                             ng-show="diff_container.modified">
                </md-checkbox>
            </div>
        </div>
        <div flex="40">
            <span class="diff-text-unmodifiable diff-value">
              {{diff_container.property_to_compare_to.value ? diff_container.property_to_compare_to.value : "Aucune valeur renseignée"}}
            </span>
        </div>
    </div>
</div>

<!-- Diff -->
<div layout="column" class="bg-light">
     <div layout="row">
        <div flex="10">
            <md-button ng-click="toggle2 = !toggle2" class="md-fab md-mini" aria-label="Deplier/Plier le menu"
                       ng-disabled="(diff_containers | filter:{'status':2}).length < 1">
                <i class="fa"
                      ng-class="{'fa-eye': !toggle2, 'fa-eye-slash': toggle2}"></i>
            </md-button>
        </div>

        <div flex>
            <h3>Différents sur <span class="diff-text-modifiable">{{application_name}} - {{platform_name}}</span> et <span
                    class="diff-text-unmodifiable">{{compare_application}} -
                {{compare_platform}}</span>
                ({{(diff_containers | filter:{'status':2}).length}})</h3>
        </div>
    </div>
    <div layout="row" layout-wrap ng-show="toggle2">
        <div flex="20">

        </div>
        <div flex="35" layout-align="end start" layout="row">
            <div><span class="diff-text-modifiable">{{application_name}} - {{platform_name}} (destination =&gt; modifiable)</span></div>
        </div>
        <div flex="5">

        </div>
        <div flex="40">
            <span class="diff-text-unmodifiable">{{compare_application}} - {{compare_platform}} (source =&gt; non modifiable)</span>
        </div>
    </div>
    <div layout="row" layout-wrap ng-show="toggle2">
        <div flex="20">
            <md-input-container class="md-block">
                <label>Filtrer les propriétés par clé</label>
                <input type="text"required ng-trim="true"
                       ng-model="propertiesKeyFilter2">
            </md-input-container>
        </div>
        <div flex="35" layout-align="end start" layout="row">
            <div>
                <span>Sélectionner les valeurs à reporter <span
                        class="fa fa-stop diff-text-unmodifiable"></span> =====&gt; <span
                        class="fa fa-stop diff-text-modifiable"></span></span>
            </div>
        </div>
        <div flex="5" layout="row" layout-align="center start">
            <div>
                <md-checkbox aria-label="Sélectionner toutes les valeurs" ng-model="toggle_diff"
                         ng-click="toggle_selected_to_containers_with_filter({'status': 2}, !toggle_diff, propertiesKeyFilter2)">
                </md-checkbox>
            </div>
        </div>
        <div flex="40">
            Tous
        </div>
    </div>
    <md-divider ng-show="toggle2"></md-divider>
    <div layout="row" ng-show="toggle2" ng-repeat="diff_container in diff_containers2 = (diff_containers | filter:{'status':2, 'property_name': propertiesKeyFilter2}  | orderBy:'property_name')">
        <div flex="20" layout-align="end start" layout="row">
            <div class="diff-property-name">{{diff_container.property_name}}</div>
        </div>
        <div flex="35" layout-align="end start" layout="row">
            <div class="diff-text-modifiable diff-value">
                    {{diff_container.property_to_modify.value ? diff_container.property_to_modify.value : "Aucune valeur renseignée"}}
            </div>
        </div>
        <div flex="5" layout="row" layout-align="center start">
            <div>
                <warning-value property-to-modify="diff_container.property_to_modify" property-to-compare-to="diff_container.property_to_compare_to"></warning-value>
                <md-checkbox aria-label="Reporter la valeur" ng-model="diff_container.selected" class="diff-checkbox" class="diff"></md-checkbox>
            </div>
        </div>
        <div flex="40">
            <span class="diff-text-unmodifiable diff-value">
              {{diff_container.property_to_compare_to.value ? diff_container.property_to_compare_to.value : "Aucune valeur renseignée"}}
            </span>
        </div>
    </div>
</div>

<!-- Seulement à droite -->
<div layout="column" class="bg-light">
    <div layout="row">
        <div flex="10">
            <md-button ng-click="toggle3 = !toggle3" class="md-fab md-mini" aria-label="Deplier/Plier le menu"
                       ng-disabled="(diff_containers | filter:{'status':3}).length < 1">
                <i class="fa"
                   ng-class="{'fa-eye': !toggle3, 'fa-eye-slash': toggle3}"></i>
            </md-button>
        </div>

        <div flex>
            <h3>Seulement sur <span class="diff-text-unmodifiable">{{compare_application}} - {{compare_platform}}</span>
                ({{(diff_containers | filter:{'status':3}).length}})</h3>
        </div>
    </div>
    <div layout="row" layout-wrap ng-show="toggle3">
        <div flex="20">
        </div>
        <div flex="35" layout-align="end start" layout="row">
            <div class="diff-text-modifiable">{{application_name}} - {{platform_name}} (destination =&gt; modifiable)</div>
        </div>
        <div flex="5">

        </div>
        <div flex="40">
            <span class="diff-text-unmodifiable">{{compare_application}} - {{compare_platform}} (source =&gt; non modifiable)</span>
        </div>
    </div>
    <div layout="row" layout-wrap ng-show="toggle3">
        <div flex="20">
            <md-input-container class="md-block">
                <label>Filtrer les propriétés par clé</label>
                <input type="text"required ng-trim="true"
                       ng-model="propertiesKeyFilter3">
            </md-input-container>
        </div>
        <div flex="35" layout-align="end start" layout="row">
            <div>
                <span>Sélectionner les valeurs à reporter <span
                        class="fa fa-stop diff-text-unmodifiable"></span> =====&gt; <span
                        class="fa fa-stop diff-text-modifiable"></span></span>            </div>
        </div>
        <div flex="5" layout="row" layout-align="center start">
            <div>
                <md-checkbox aria-label="Sélectionner toutes les valeurs" ng-model="toggle_right" class="diff"
                             ng-click="toggle_selected_to_containers_with_filter({'status': 3}, !toggle_right, propertiesKeyFilter3)">
                </md-checkbox>
            </div>
        </div>
        <div flex="40">
            Tous
        </div>
    </div>
    <md-divider ng-show="toggle3"></md-divider>
    <div layout="row" ng-show="toggle3" ng-repeat="diff_container in diff_containers3 = (diff_containers | filter:{'status':3, 'property_name': propertiesKeyFilter3}  | orderBy:'property_name')">
        <div flex="20" layout-align="end start" layout="row">
            <div class="diff-property-name text-stroke">{{diff_container.property_name}}</div>
        </div>
        <div flex="35" layout-align="end start" layout="row">
            <div class="diff-text-modifiable diff-value">
                {{diff_container.property_to_modify.value ? diff_container.property_to_modify.value : "Propriété non présente"}}
            </div>
        </div>
        <div flex="5" layout="row" layout-align="center start">
            <div>
                <md-checkbox aria-label="Reporter la valeur" ng-model="diff_container.selected" class="diff">
                </md-checkbox>
            </div>
        </div>
        <div flex="40">
            <span class="diff-text-unmodifiable diff-value">
              {{diff_container.property_to_compare_to.value ? diff_container.property_to_compare_to.value : "Aucune valeur renseignée"}}
            </span>
        </div>
    </div>
</div>


<div layout="row" layout-margin>
    <md-button class="md-raised md-primary" ng-click="apply_diff()">
        1/ Prévisualiser les changements <span class="diff-warning-text-button">ne sauvegarde pas</span>
    </md-button>
    <md-button class="md-raised md-primary"  ng-really-click="save_diff()" ng-really-message="Les modifications vont être appliquées sur {{application_name}} - {{platform_name}}. Continuer ?">
        2/ <span class="diff-warning-text-button">Sauvegarder</span> les changements (il faut avoir prévisualisé avant)
    </md-button>
</div>