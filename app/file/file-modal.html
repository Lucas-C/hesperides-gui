<md-dialog flex="auto">
    <md-dialog-content>
        <div class="ng-binding">
            <h2>Prévisualisation de {{instance.name}}</h2>
            <md-content layout-padding class="autoScroll" style="max-width: none;">
                <form novalidate ng-repeat="(index, item) in fileEntries track by $index" heading="{{elem.name}}">
                    <section class="file-header">
                            <md-button class="md-xs" ng-if ="item.on_error == false" ng-click="download_file(item.url)">
                                <md-icon class="fa fa-download"></md-icon>
                            </md-button>
                            <md-button ng-click="open(index)" class="file-title">{{item.name}} ( {{item.rights}} )</md-button>

                            <!-- Add css class 'ng-hide' to disable display at startup and for working autorefresh plugin -->
                            <div ng-show="index === isOpen" class="file-content ng-hide">
                                <div layout="row">
                                    <div flex>
                                        <label class="template-section-header">Contenu du fichier</label>
                                        <kbd>F11</kbd> Activer /
                                        <kbd>Esc</kbd> Desactiver l'edtion en plein ecran
                                    </div>
                                </div>
                                <div id="templateContentParent">
                                    <div ng-switch = "item.on_error">
                                        <div ng-switch-when="true" class="alert alert-danger" style = "background-color:#f2dede;border-color:#eed3d7;color:#b94a48;">
                                            <strong>Erreur !</i></strong> {{item.content}}
                                        </div>
                                        <ui-codemirror id="templateContent" ui-codemirror-opts="codeMirrorOptions"
                                                       ng-model="item.content" ng-keydown="$checkIfCodeMirrorInFullScreen($event)"
                                                       ng-switch-default
                                                ></ui-codemirror>
                                    </div>
                                </div>
                            </div>
                    </section>
                </form>
            </md-content>
        </div>
        <md-dialog-actions>
            <md-button ng-click="download_all_instance_files()" class="md-raised md-primary" ng-disabled="moduleForm.$invalid">Tous télécharger</md-button>
            <md-button ng-click="$closeDialog()" class="md-raised md-warn">Annuler</md-button>
        </md-dialog-actions>
    </md-dialog-content>
</md-dialog>